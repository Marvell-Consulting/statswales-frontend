import{w as p}from"./with-props-daUcymKh.js";import{j as s}from"./context-Zvpbq3dQ.js";import{F as h}from"./chunk-DQRVZFIR-CI4QRDf9.js";import{T as i}from"./T-CQIXqhPq.js";import{L as n}from"./LocaleLink-CIhOCkNj.js";import{s as k}from"./status-to-colour-CUWEJy7V.js";import{E as m}from"./ErrorProvider-Cxuz4RMS.js";import{D as g}from"./DatasetStatus-BlR5j9Z6.js";import"./locale-url-yD_AyXRN.js";import"./clsx-B-dksMZM.js";function c({status:e}){const t=k(e);return s.jsx("div",{className:"govuk-task-list__status",children:s.jsx("strong",{className:t?`govuk-tag govuk-tag--${t}`:void 0,children:s.jsxs(i,{children:["publish.tasklist.status.",e]})})})}function v({isDeveloper:e,datasetId:t,publishingStatus:d}){return s.jsx("div",{className:"govuk-grid-column-one-third",children:s.jsxs("ul",{className:"govuk-task-list border-top",children:[s.jsx("li",{className:"govuk-task-list__item govuk-task-list__item--with-link tasklist-no-border",children:s.jsx("div",{className:"govuk-task-list__name-and-hint",children:s.jsx(n,{path:`/publish/${t}/overview`,children:s.jsx(i,{children:"publish.tasklist.overview"})})})}),s.jsx("li",{className:"govuk-task-list__item govuk-task-list__item--with-link tasklist-no-border",children:s.jsx("div",{className:"govuk-task-list__name-and-hint",children:s.jsx(n,{path:`/publish/${t}/cube-preview`,target:"_blank",children:s.jsx(i,{children:"publish.tasklist.preview"})})})}),e&&s.jsx("li",{className:"govuk-task-list__item govuk-task-list__item--with-link tasklist-no-border",children:s.jsx("div",{className:"govuk-task-list__name-and-hint",children:s.jsx(n,{path:`/developer/${t}`,target:"_blank",children:s.jsx(i,{children:"publish.tasklist.open_developer_view"})})})}),["incomplete","update_incomplete"].includes(d)&&s.jsx("li",{className:"govuk-task-list__item govuk-task-list__item--with-link tasklist-no-border",children:s.jsx("div",{className:"govuk-task-list__name-and-hint",children:s.jsx(n,{path:`/publish/${t}/delete`,children:s.jsxs(i,{children:["publish.tasklist.delete.",d==="incomplete"?"dataset":"update"]})})})})]})})}function a({id:e,describedBy:t,translationKey:d="metadata",path:r,status:l,datasetId:u,translation:o}){return s.jsxs("li",{className:"govuk-task-list__item govuk-task-list__item--with-link",children:[s.jsx("div",{className:"govuk-task-list__name-and-hint",children:s.jsx(n,{path:`/publish/${u}/${r||e}`,"aria-describedby":t,className:"govuk-link govuk-task-list__link",children:o||s.jsxs(i,{children:["publish.tasklist.",d,".",e]})})}),s.jsx(c,{status:l})]})}const B=p(function({loaderData:t}){var r;function d(){var l;return((l=t.revision)==null?void 0:l.revision_index)===0&&!t.revision.data_table_id?"update-type":t.revision.data_table_id?"preview":"upload"}return s.jsxs(m,{children:[s.jsx("div",{className:"govuk-grid-row",children:s.jsxs("div",{className:"govuk-grid-column-two-thirds",children:[s.jsx("span",{className:"region-subhead",children:s.jsx(i,{children:"publish.tasklist.subheading"})}),s.jsx("h1",{className:"govuk-heading-xl govuk-!-margin-bottom-2",children:t.datasetTitle})]})}),s.jsx(g,{publishingStatus:t.publishingStatus,datasetStatus:t.datasetStatus}),s.jsxs("div",{className:"govuk-grid-row",children:[s.jsxs("div",{className:"govuk-grid-column-two-thirds",children:[s.jsx("h2",{className:"govuk-heading-l",children:s.jsx(i,{children:"publish.tasklist.data.subheading"})}),s.jsxs("ul",{className:"govuk-task-list",children:[s.jsx(a,{id:"datatable",translationKey:"data",path:d(),describedBy:"prepare-application-1-status",status:t.taskList.datatable,datasetId:t.datasetId}),t.taskList.measure&&s.jsx(a,{id:"measure",describedBy:"prepare-application-1-status",status:t.taskList.measure.status,datasetId:t.datasetId,translation:t.taskList.measure.name}),(r=t.taskList.dimensions)==null?void 0:r.map((l,u)=>s.jsx(a,{id:"dimension",path:`dimension/${l.id}`,describedBy:"prepare-application-1-status",status:l.status,datasetId:t.datasetId,translation:l.name},u))]}),s.jsx("h2",{className:"govuk-heading-l govuk-!-margin-top-5",children:s.jsx(i,{children:"publish.tasklist.metadata.subheading"})}),s.jsxs("ul",{className:"govuk-task-list",children:[s.jsx(a,{id:"title",describedBy:"prepare-application-3-status",status:t.taskList.metadata.title,datasetId:t.datasetId}),s.jsx(a,{id:"summary",describedBy:"prepare-application-3-status",status:t.taskList.metadata.summary,datasetId:t.datasetId}),s.jsx(a,{id:"data_collection",path:"collection",status:t.taskList.metadata.collection,datasetId:t.datasetId}),s.jsx(a,{id:"statistical_quality",path:"quality",status:t.taskList.metadata.quality,datasetId:t.datasetId}),s.jsx(a,{id:"data_sources",path:"providers",status:t.taskList.metadata.sources,describedBy:"prepare-application-4-status",datasetId:t.datasetId}),s.jsx(a,{id:"related_reports",path:"related",status:t.taskList.metadata.related,describedBy:"prepare-application-5-status",datasetId:t.datasetId}),s.jsx(a,{id:"update_frequency",path:"update-frequency",status:t.taskList.metadata.frequency,describedBy:"prepare-application-5-status",datasetId:t.datasetId}),s.jsx(a,{id:"designation",status:t.taskList.metadata.designation,describedBy:"prepare-application-5-status",datasetId:t.datasetId}),s.jsx(a,{id:"relevant_topics",path:"topics",status:t.taskList.metadata.topics,describedBy:"prepare-application-5-status",datasetId:t.datasetId})]}),s.jsx("h2",{className:"govuk-heading-l govuk-!-margin-top-5",children:s.jsx(i,{children:"publish.tasklist.translation.subheading"})}),s.jsxs("ul",{className:"govuk-task-list",children:[s.jsxs("li",{className:"govuk-task-list__item govuk-task-list__item--with-link",children:[s.jsx("div",{className:"govuk-task-list__name-and-hint",children:t.taskList.translation.export==="cannot_start"?s.jsx("p",{className:"govkuk-body govuk-!-margin-0",children:s.jsx(i,{children:"publish.tasklist.translation.export"})}):s.jsx(n,{path:`/publish/${t.datasetId}/translation/export`,className:"govuk-link govuk-task-list__link","aria-describedby":"prepare-application-5-status",children:s.jsx(i,{children:"publish.tasklist.translation.export"})})}),s.jsx(c,{status:t.taskList.translation.export})]}),s.jsxs("li",{className:"govuk-task-list__item govuk-task-list__item--with-link",children:[s.jsx("div",{className:"govuk-task-list__name-and-hint",children:t.taskList.translation.import==="cannot_start"?s.jsx("p",{className:"govkuk-body govuk-!-margin-0",children:s.jsx(i,{children:"publish.tasklist.translation.import"})}):s.jsx(n,{path:`/publish/${t.datasetId}/translation/import`,className:"govuk-link govuk-task-list__link","aria-describedby":"prepare-application-5-status",children:s.jsx(i,{children:"publish.tasklist.translation.import"})})}),s.jsx(c,{status:t.taskList.translation.import})]})]}),s.jsx("h2",{className:"govuk-heading-l govuk-!-margin-top-5",children:s.jsx(i,{children:"publish.tasklist.publishing.subheading"})}),s.jsx("ul",{className:"govuk-task-list",children:s.jsx(a,{id:"when",datasetId:t.datasetId,translation:`publish.tasklist.publishing.${t.taskList.isUpdate?"when_update":"when"}`,path:"schedule",status:t.taskList.publishing.when,describedBy:"prepare-application-5-status"})}),t.canSubmit&&s.jsxs("div",{children:[s.jsx("h2",{className:"govuk-heading-l govuk-!-margin-top-5",children:s.jsx(i,{children:"publish.tasklist.submit.subheading"})}),s.jsx(h,{method:"post",children:s.jsx("button",{type:"submit",className:"govuk-button","data-module":"govuk-button",children:s.jsx(i,{children:"publish.tasklist.submit.button"})})})]})]}),s.jsx(v,{isDeveloper:t.isDeveloper,datasetId:t.datasetId,publishingStatus:t.publishingStatus})]})]})});export{B as default};
