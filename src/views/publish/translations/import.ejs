<%- include("../../partials/header", {
    backLink: "javascript:history.back()",
    returnLink: buildUrl(`/publish/${locals.datasetId}/tasklist`, i18n.language)
}); %>
<div class="form-background">
    <div class="govuk-width-container app-width-container">
        <main class="govuk-main-wrapper" id="main-content" role="main">
            <div class="govuk-width-container">
                <% if (locals.preview) { %>
                    <h1 class="govuk-heading-xl"><%= t('translations.import.heading_preview') %></h1>

                    <%- include("../../partials/translations-preview-table", { translations, isImport: true }) %>

                    <a href="<%= buildUrl(`/publish/${locals.datasetId}/translation/import?confirm=true`, i18n.language) %>" class="govuk-button" data-module="govuk-button" style="vertical-align: unset;" data-prevent-double-click="true">
                        <%= t('buttons.continue') %>
                    </a>
                <% } else { %>
                    <h1 class="govuk-heading-xl"><%= t('translations.import.heading') %></h1>

                    <%- include("../../partials/translations-preview-table", { translations: existingTranslations, isImport: true }); %>

                    <div class="govuk-inset-text">
                        <%= t('translations.import.note') %>
                    </div>

                    <%- include("../../partials/error-handler"); %>
                    <form action="<%= buildUrl(`/publish/${locals.datasetId}/translation/import`, i18n.language) %>" method="post" enctype="multipart/form-data">
                        <div class="govuk-form-group">
                            <label class="govuk-label govuk-label--s" for="csv">
                                <%= t('translations.import.form.file.label') %>
                            </label>
                            <input class="govuk-file-upload" id="csv" name="csv" type="file" placeholder="" accept=".csv,text/csv">
                        </div>
                        <button type="submit" class="govuk-button" data-module="govuk-button">
                            <%= t('translations.import.buttons.import') %>
                        </button>
                    </form>
                <% } %>

            </div>
        </main>
    </div>
</div>
<style>
	.translation-import td {
		white-space: pre-line;
	}
</style>

<%- include("../../partials/footer"); %>
